# Contributor: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=unrar
pkgver=5.7.1
pkgrel=0
pkgdesc="RAR uncompression program"
url="https://www.rarlab.com"
arch="all"
options="!check"  # No test suite.
license="custom"
depends=""
makedepends=""
subpackages="$pkgname-doc"
source="https://www.rarlab.com/rar/unrarsrc-$pkgver.tar.gz
	makefile.patch"
builddir="$srcdir/$pkgname"

build() {
	cd "$builddir"
	make CXX="${CXX:-g++}" STRIP=: -f makefile
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir"/usr install

	install -Dm644 license.txt \
		"$pkgdir/usr/share/licenses/$pkgname/license.txt"
}

sha512sums="6d8a18e44453dbfb610ad4fdc9bac6fc1469f8e04fbf6faf0a119c1a582e60cb51e68aec4552316717cc2133473120973c97a71806e30ef45f1d39070edaf610  unrarsrc-5.7.1.tar.gz
2caa145c2fb1257c3cea1f552cba7bf8a3f8772c65c9751aad3fb5bec4957c7fefdb7bbb016c94b73d4778cef76460ddc2abafa8a12d09ebd24bcb6f1dcb263c  makefile.patch"
